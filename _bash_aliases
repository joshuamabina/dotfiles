#Functions

# Resolve active wlan0

fixwifi() {
    MYIP=$(ip addr | grep 'state UP' -A2 | tail -n1 | awk '{print $2}' | cut -f1  -d'/')
    IFS=. read -r i1 i2 i3 i4 <<< "${MYIP}"
    IFS=. read -r m1 m2 m3 m4 <<< "255.255.255.1"
    printf "nameserver %d.%d.%d.%d\n" "$((i1 & m1))" "$((i2 & m2))" "$((i3 & m3))" "$((i4 & m4))" | xclip -sel c

    #TODO update /etc/resolv.conf
}

#
# Create and change the current working directory.
#
mkcdir() {
    if [ ! $1 ]; then

        echo "Whoops! Try mkcdir </path/to/directory>"

    else

        mkdir -p -- "$1" && cd "$1"

    fi
}

#
# Git reset current HEAD to previous state.
#
stfu() {
    STFU_CMD="git reset HEAD"

    if [ $1 ]; then

        STFU_CMD="${STFU_CMD}~$1"

    fi

    ${STFU_CMD}
}

#
# Copy password of specified account to clipboard
#
getpasswd() {
    local account_name="$1"

    cat ~/logins | grep $account_name | cut -d ':' -f2 | xclip -sel c
}

#
# Start a logbook
#
function lb() {

    vim ~/logbook/$(date '+%Y-%m-%d').md

}

#
# Do a DuckDuckGo search, opens results in firefox.
#
ddg() {

    BASE_URL='https://duckduckgo.com?q='

    DDG_QUERY=''

    for term in "$@"; do

        case "$1" in

            -b|--bang)
                shift

                DDG_QUERY="!$1%20"

                shift
                ;;

            *)
                DDG_QUERY="${DDG_QUERY}$1%20"

                shift
                ;;

        esac

    done


    #echo "${BASE_URL}${DDG_QUERY}"
    firefox "${BASE_URL}${DDG_QUERY}"
}

#Reload
alias so='source $HOME/.bashrc'

#Globals
alias ..='cd ..'
alias ...='cd ../..'
alias ....='cd ../../..'

alias less='less -r'

alias ef='editor'
alias ed='editor .'

alias du='du -sh'

alias grep='grep --color=auto'
alias fgrep='fgrep --color=auto'
alias egrep='egrep --color=auto'

alias dir='dir --color=auto'
alias vdir='vdir --color=auto'

#Aptitude
alias apt-install='sudo apt-get install'
alias apt-remove='sudo apt-get remove'
alias apt-purge='sudo apt-get purge'
alias apt-autoclean='sudo apt-get autoclean'
alias apt-autoremove='sudo apt-get autoremove'

#Directories
alias la='ls -ali'
alias ll='ls -l'
alias ls='ls -Fsh -t --group-directories-first'

alias mkdir='mkdir -p'

#Git
#TODO migrate to git-aliases
alias g='git'

alias ca='g commit --amend'
alias cc='g commit'
alias ga='g add'
alias gaa='g add .'
alias gap='g add -p'
alias gash='g stash'
alias gb='g branch'
alias gba='g branch -a'
alias gconf='g config'
alias gd='g diff'
alias gds='g diff --staged'
alias gftp='g ftp'
alias gl='g log'
alias glo='g log --oneline --decorate'
alias glone='g clone'
alias gout='g checkout'
alias gs='g status'

alias fetch='g fetch'
alias pull='g pull'
alias push='g push'

alias f='git flow feature'
complete -F __git_flow_feature f

alias fu='g reset --hard && g clean -df'

#Tmux
tmux='tmux -2'

#YouTube-dl
alias yt='/usr/local/bin/youtube-dl -q'

#Yarn
alias yad='yarn add --save'
alias yev='yarn dev'
alias yatch='yarn watch'
alias yall='yarn install'

#Composer
alias dump-autoload='composer dump-autoload'
alias require='composer require'
alias require-dev='composer require --dev'
alias call='composer install'

#Laravel
alias art='php artisan'

alias serve='art serve'
alias tinker='art tinker'

alias seed='art db:seed'

alias migrate='art migrate && seed'

alias fresh='art migrate:fresh && seed'
alias fresh-test='art migrate:fresh --env=testing'

alias clear-medialibrary='art medialibrary:clear'
alias clear-compiled='art clear-compiled'
alias clear-config='art config:clear'
alias clear-cache='art cache:clear'
alias clear-route='art route:clear'
alias clear-view='art view:clear'

alias art-clear='clear-compiled && clear-cache && clear-config && clear-route && clear-view && clear-medialibrary'
alias art-cache='art config:cache && art route:cache'

alias dump='dump-autoload && art-clear'

alias opt='dump && art-cache'

alias trans='art langman:trans'
alias route-list='art route:list'

# vim: ft=conf softtabstop=4 shiftwidth=4 expandtab autoindent
